{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sauli\\\\OneDrive\\\\Ty\\xF6p\\xF6yt\\xE4\\\\JAMK\\\\retkisofta\\\\retkiohjelma\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSpring, animated } from \"react-spring\";\nimport Map from \"./Map\";\nimport BarChart from \"./BarChart\";\nimport PieChart from \"./PieChart\";\nimport { BeatLoader } from \"react-spinners\"; // Tulikartta API\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://tulikartta.fi/api-json2.php\";\n\nfunction App() {\n  _s();\n\n  const [paikat, setPaikat] = useState([]);\n  const [maakunnat, setMaakunnat] = useState([]);\n  const [tyypit, setTyypit] = useState([]);\n  const [valittuMaakunta, setValittuMaakunta] = useState(\"\");\n  const [valittuTyyppi, setValittuTyyppi] = useState(\"\");\n  const [rajatutPaikat, setRajatutPaikat] = useState([]);\n  const [paikatMaakunnassa, setPaikatMaakunnassa] = useState([]);\n  const [newLat, setNewLat] = useState();\n  const [newLong, setNewLong] = useState();\n  const [toggleMaakunnatClick, setToggleMaakunnatClick] = useState(false);\n  const [toggleTyypitClick, setToggleTyypitClick] = useState(false);\n  const [chartData, setChartData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true); // Maakunnat -valikon dropdown animaatio\n\n  const maakunnatFade = useSpring({\n    position: \"absolute\",\n    border: toggleMaakunnatClick ? 1 : 0,\n    height: toggleMaakunnatClick ? 100 : 0,\n    width: 200\n  }); // Tyypit -valikon dropdown animaatio\n\n  const tyypitFade = useSpring({\n    position: \"absolute\",\n    border: toggleTyypitClick ? 1 : 0,\n    height: toggleTyypitClick ? 100 : 0,\n    width: 200\n  }); // Sivun latautuessa haetaan data\n\n  useEffect(() => {\n    fetch(API_URL, {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }).then(response => {\n      console.log(response);\n      return response.json();\n    }).then(jsonData => {\n      const paikatArr = [...jsonData];\n      const maakunnatArr = [];\n      const tyypitArr = [];\n      tyypitArr.push(\"Näytä kaikki\");\n\n      for (let i of paikatArr) {\n        maakunnatArr.push(i.maakunta);\n        tyypitArr.push(i.tyyppi);\n      }\n\n      const maakunnatRemoveDuplicates = [...new Set(maakunnatArr)];\n      const tyypitRemoveDublicates = [...new Set(tyypitArr)];\n      setPaikat([...jsonData]);\n      setMaakunnat([...maakunnatRemoveDuplicates]);\n      setTyypit([...tyypitRemoveDublicates]);\n      setIsLoading(false);\n    });\n  }, []); // Päivitetään paikat valitussa maakunnassa kun valitaan maakunta\n\n  useEffect(() => {\n    paivitaPaikatMaakunnassa();\n    paivitaChartData();\n    return () => {};\n  }, [valittuMaakunta]); // Päivitetään kaikki paikat kun valitaan tyyppi\n\n  useEffect(() => {\n    paivitaPaikat();\n  }, [valittuTyyppi]); // Päivittää kaavioille lähetettävän datan\n\n  const paivitaChartData = () => {\n    const chartDataArr = paikat.filter(paikka => paikka.maakunta == valittuMaakunta);\n    setChartData([chartDataArr]);\n  }; // Päivittää paikat valitussa maakunnassa\n\n\n  const paivitaPaikatMaakunnassa = () => {\n    let paikatMaakunnassaArr = [];\n\n    if (valittuTyyppi == \"Näytä kaikki\" || valittuTyyppi == \"\") {\n      paikatMaakunnassaArr = paikat.filter(paikka => paikka.maakunta == valittuMaakunta);\n      setChartData([paikatMaakunnassaArr]);\n    } else {\n      paikatMaakunnassaArr = paikat.filter(paikka => paikka.maakunta == valittuMaakunta && paikka.tyyppi == valittuTyyppi);\n    }\n\n    setPaikatMaakunnassa([paikatMaakunnassaArr]);\n    setRajatutPaikat([paikatMaakunnassaArr]);\n\n    if (valittuMaakunta != \"\" && paikatMaakunnassaArr[0]) {\n      const splitKoordinaatit = paikatMaakunnassaArr[0].koordinaatti.split(\",\");\n      setNewLat(splitKoordinaatit[0]);\n      setNewLong(splitKoordinaatit[1]);\n    }\n  }; // Päivittää kaikki paikat valitun maakunnan ja tyypin mukaan\n\n\n  const paivitaPaikat = () => {\n    if (valittuMaakunta != \"\" && valittuTyyppi != \"Näytä kaikki\") {\n      let rajatutPaikat = [];\n\n      async function f() {\n        {\n          rajatutPaikat = paikat.filter(paikka => paikka.maakunta == valittuMaakunta && paikka.tyyppi == valittuTyyppi);\n        }\n      }\n\n      f().then(() => setRajatutPaikat([rajatutPaikat]));\n    } else if (valittuTyyppi == \"Näytä kaikki\") {\n      paivitaPaikatMaakunnassa();\n    }\n  }; // Luo ja palauttaa maakunnat -dropvalikon\n\n\n  const luoMaakuntaValikko = () => {\n    let selectBox = document.getElementById(\"inputMaakunnat\");\n    const options = Object.values(maakunnat).map((maakunta, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"valinnat\",\n      onClick: e => {\n        selectBox.value = e.target.innerHTML;\n        setValittuMaakunta(e.target.innerHTML);\n        selectBox.focus();\n        setToggleMaakunnatClick(false);\n      },\n      children: maakunta\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(animated.div, {\n      style: maakunnatFade,\n      id: \"maakunnatContainer\",\n      className: \"options\",\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this);\n  }; // Luo ja palauttaa tyypit -dropvalikon\n\n\n  const luoTyypitValikko = () => {\n    let selectBox = document.getElementById(\"inputTyypit\");\n    const options = Object.values(tyypit).map((tyyppi, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"valinnat\",\n      onClick: e => {\n        selectBox.value = e.target.innerHTML;\n        setValittuTyyppi(e.target.innerHTML);\n        selectBox.focus();\n        setToggleTyypitClick(false);\n      },\n      children: tyyppi\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(animated.div, {\n      style: tyypitFade,\n      id: \"tyypitContainer\",\n      className: \"options\",\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this);\n  }; // Palauttaa ohjelman\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: !isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"inputMaakunnat\",\n        type: \"text\",\n        value: valittuMaakunta,\n        onClick: () =>\n        /* naytaMaakunnat() */\n        {\n          /* setNaytaMaakuntaValikko(true); */\n          setToggleMaakunnatClick(!toggleMaakunnatClick);\n        },\n        placeholder: \"Valitse maakunta\",\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this), luoMaakuntaValikko(), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"inputTyypit\",\n        inputMode: \"text\",\n        value: valittuTyyppi,\n        onClick: () => {\n          setToggleTyypitClick(!toggleTyypitClick);\n        },\n        placeholder: \"Valitse tyyppi\",\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), luoTyypitValikko(), maakunnat.length > 0 && tyypit.length > 0 && paikat && rajatutPaikat && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-chart-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Map, {\n          className: \"map\",\n          maakunta: valittuMaakunta,\n          tyyppi: valittuTyyppi,\n          kaikkiPaikat: [...paikatMaakunnassa],\n          rajatutPaikat: [...rajatutPaikat],\n          newLat: newLat,\n          newLong: newLong\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(BarChart, {\n            tyypit: [...tyypit],\n            paikatMaakunnassa: chartData,\n            rajatutPaikat: rajatutPaikat\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(PieChart, {\n            paikat: [...tyypit],\n            paikatMaakunnassa: chartData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"relative\",\n        top: 300,\n        color: \"white\",\n        fontSize: \"30px\",\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(BeatLoader, {\n        size: 50,\n        color: \"white\",\n        loading: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), \"Loading...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"PJ9s24hlcoBg1Q8IDXyZBFhHXLA=\", false, function () {\n  return [useSpring, useSpring];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/sauli/OneDrive/Työpöytä/JAMK/retkisofta/retkiohjelma/src/App.js"],"names":["React","useState","useEffect","useSpring","animated","Map","BarChart","PieChart","BeatLoader","API_URL","App","paikat","setPaikat","maakunnat","setMaakunnat","tyypit","setTyypit","valittuMaakunta","setValittuMaakunta","valittuTyyppi","setValittuTyyppi","rajatutPaikat","setRajatutPaikat","paikatMaakunnassa","setPaikatMaakunnassa","newLat","setNewLat","newLong","setNewLong","toggleMaakunnatClick","setToggleMaakunnatClick","toggleTyypitClick","setToggleTyypitClick","chartData","setChartData","isLoading","setIsLoading","maakunnatFade","position","border","height","width","tyypitFade","fetch","Accept","then","response","console","log","json","jsonData","paikatArr","maakunnatArr","tyypitArr","push","i","maakunta","tyyppi","maakunnatRemoveDuplicates","Set","tyypitRemoveDublicates","paivitaPaikatMaakunnassa","paivitaChartData","paivitaPaikat","chartDataArr","filter","paikka","paikatMaakunnassaArr","splitKoordinaatit","koordinaatti","split","f","luoMaakuntaValikko","selectBox","document","getElementById","options","Object","values","map","index","e","value","target","innerHTML","focus","luoTyypitValikko","length","top","color","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSpring, animated } from \"react-spring\";\nimport Map from \"./Map\";\nimport BarChart from \"./BarChart\";\nimport PieChart from \"./PieChart\";\nimport { BeatLoader } from \"react-spinners\";\n\n// Tulikartta API\nconst API_URL = \"https://tulikartta.fi/api-json2.php\";\n\nfunction App() {\n  const [paikat, setPaikat] = useState([]);\n  const [maakunnat, setMaakunnat] = useState([]);\n  const [tyypit, setTyypit] = useState([]);\n  const [valittuMaakunta, setValittuMaakunta] = useState(\"\");\n  const [valittuTyyppi, setValittuTyyppi] = useState(\"\");\n  const [rajatutPaikat, setRajatutPaikat] = useState([]);\n  const [paikatMaakunnassa, setPaikatMaakunnassa] = useState([]);\n  const [newLat, setNewLat] = useState();\n  const [newLong, setNewLong] = useState();\n  const [toggleMaakunnatClick, setToggleMaakunnatClick] = useState(false);\n  const [toggleTyypitClick, setToggleTyypitClick] = useState(false);\n  const [chartData, setChartData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Maakunnat -valikon dropdown animaatio\n  const maakunnatFade = useSpring({\n    position: \"absolute\",\n    border: toggleMaakunnatClick ? 1 : 0,\n    height: toggleMaakunnatClick ? 100 : 0,\n    width: 200,\n  });\n\n  // Tyypit -valikon dropdown animaatio\n  const tyypitFade = useSpring({\n    position: \"absolute\",\n    border: toggleTyypitClick ? 1 : 0,\n    height: toggleTyypitClick ? 100 : 0,\n    width: 200,\n  });\n\n  // Sivun latautuessa haetaan data\n  useEffect(() => {\n    fetch(API_URL, {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n    })\n      .then((response) => {\n        console.log(response);\n        return response.json();\n      })\n      .then((jsonData) => {\n        const paikatArr = [...jsonData];\n        const maakunnatArr = [];\n        const tyypitArr = [];\n\n        tyypitArr.push(\"Näytä kaikki\");\n\n        for (let i of paikatArr) {\n          maakunnatArr.push(i.maakunta);\n          tyypitArr.push(i.tyyppi);\n        }\n        const maakunnatRemoveDuplicates = [...new Set(maakunnatArr)];\n        const tyypitRemoveDublicates = [...new Set(tyypitArr)];\n\n        setPaikat([...jsonData]);\n        setMaakunnat([...maakunnatRemoveDuplicates]);\n        setTyypit([...tyypitRemoveDublicates]);\n        setIsLoading(false);\n      });\n  }, []);\n\n  // Päivitetään paikat valitussa maakunnassa kun valitaan maakunta\n  useEffect(() => {\n    paivitaPaikatMaakunnassa();\n    paivitaChartData();\n    return () => {};\n  }, [valittuMaakunta]);\n\n  // Päivitetään kaikki paikat kun valitaan tyyppi\n  useEffect(() => {\n    paivitaPaikat();\n  }, [valittuTyyppi]);\n\n  // Päivittää kaavioille lähetettävän datan\n  const paivitaChartData = () => {\n    const chartDataArr = paikat.filter(\n      (paikka) => paikka.maakunta == valittuMaakunta\n    );\n\n    setChartData([chartDataArr]);\n  };\n\n  // Päivittää paikat valitussa maakunnassa\n  const paivitaPaikatMaakunnassa = () => {\n    let paikatMaakunnassaArr = [];\n\n    if (valittuTyyppi == \"Näytä kaikki\" || valittuTyyppi == \"\") {\n      paikatMaakunnassaArr = paikat.filter(\n        (paikka) => paikka.maakunta == valittuMaakunta\n      );\n      setChartData([paikatMaakunnassaArr]);\n    } else {\n      paikatMaakunnassaArr = paikat.filter(\n        (paikka) =>\n          paikka.maakunta == valittuMaakunta && paikka.tyyppi == valittuTyyppi\n      );\n    }\n    setPaikatMaakunnassa([paikatMaakunnassaArr]);\n    setRajatutPaikat([paikatMaakunnassaArr]);\n\n    if (valittuMaakunta != \"\" && paikatMaakunnassaArr[0]) {\n      const splitKoordinaatit = paikatMaakunnassaArr[0].koordinaatti.split(\",\");\n      setNewLat(splitKoordinaatit[0]);\n      setNewLong(splitKoordinaatit[1]);\n    }\n  };\n\n  // Päivittää kaikki paikat valitun maakunnan ja tyypin mukaan\n  const paivitaPaikat = () => {\n    if (valittuMaakunta != \"\" && valittuTyyppi != \"Näytä kaikki\") {\n      let rajatutPaikat = [];\n      async function f() {\n        {\n          rajatutPaikat = paikat.filter(\n            (paikka) =>\n              paikka.maakunta == valittuMaakunta &&\n              paikka.tyyppi == valittuTyyppi\n          );\n        }\n      }\n      f().then(() => setRajatutPaikat([rajatutPaikat]));\n    } else if (valittuTyyppi == \"Näytä kaikki\") {\n      paivitaPaikatMaakunnassa();\n    }\n  };\n\n  // Luo ja palauttaa maakunnat -dropvalikon\n  const luoMaakuntaValikko = () => {\n    let selectBox = document.getElementById(\"inputMaakunnat\");\n    const options = Object.values(maakunnat).map((maakunta, index) => (\n      <p\n        key={index}\n        className=\"valinnat\"\n        onClick={(e) => {\n          selectBox.value = e.target.innerHTML;\n          setValittuMaakunta(e.target.innerHTML);\n          selectBox.focus();\n          setToggleMaakunnatClick(false);\n        }}\n      >\n        {maakunta}\n      </p>\n    ));\n\n    return (\n      <animated.div\n        style={maakunnatFade}\n        id={\"maakunnatContainer\"}\n        className=\"options\"\n      >\n        {options}\n      </animated.div>\n    );\n  };\n\n  // Luo ja palauttaa tyypit -dropvalikon\n  const luoTyypitValikko = () => {\n    let selectBox = document.getElementById(\"inputTyypit\");\n    const options = Object.values(tyypit).map((tyyppi, index) => (\n      <p\n        key={index}\n        className=\"valinnat\"\n        onClick={(e) => {\n          selectBox.value = e.target.innerHTML;\n          setValittuTyyppi(e.target.innerHTML);\n          selectBox.focus();\n          setToggleTyypitClick(false);\n        }}\n      >\n        {tyyppi}\n      </p>\n    ));\n\n    return (\n      <animated.div\n        style={tyypitFade}\n        id={\"tyypitContainer\"}\n        className=\"options\"\n      >\n        {options}\n      </animated.div>\n    );\n  };\n\n  // Palauttaa ohjelman\n  return (\n    <div className=\"app-container\">\n      {!isLoading ? (\n        <div>\n          <input\n            id={\"inputMaakunnat\"}\n            type={\"text\"}\n            value={valittuMaakunta}\n            onClick={() => /* naytaMaakunnat() */ {\n              /* setNaytaMaakuntaValikko(true); */\n              setToggleMaakunnatClick(!toggleMaakunnatClick);\n            }}\n            placeholder={\"Valitse maakunta\"}\n            readOnly\n          ></input>\n          {luoMaakuntaValikko()}\n\n          <input\n            id={\"inputTyypit\"}\n            inputMode={\"text\"}\n            value={valittuTyyppi}\n            onClick={() => {\n              setToggleTyypitClick(!toggleTyypitClick);\n            }}\n            placeholder={\"Valitse tyyppi\"}\n            readOnly\n          ></input>\n\n          {luoTyypitValikko()}\n\n          {maakunnat.length > 0 &&\n            tyypit.length > 0 &&\n            paikat &&\n            rajatutPaikat && (\n              <div className=\"map-chart-wrapper\">\n                <Map\n                  className=\"map\"\n                  maakunta={valittuMaakunta}\n                  tyyppi={valittuTyyppi}\n                  kaikkiPaikat={[...paikatMaakunnassa]}\n                  rajatutPaikat={[...rajatutPaikat]}\n                  newLat={newLat}\n                  newLong={newLong}\n                ></Map>\n                <div className=\"chart-wrapper\">\n                  <BarChart\n                    tyypit={[...tyypit]}\n                    paikatMaakunnassa={chartData}\n                    rajatutPaikat={rajatutPaikat}\n                  ></BarChart>\n\n                  <PieChart\n                    paikat={[...tyypit]}\n                    paikatMaakunnassa={chartData}\n                  ></PieChart>\n                </div>\n              </div>\n            )}\n        </div>\n      ) : (\n        <div\n          style={{\n            position: \"relative\",\n            top: 300,\n            color: \"white\",\n            fontSize: \"30px\",\n            textAlign: \"center\",\n          }}\n        >\n          <BeatLoader size={50} color=\"white\" loading></BeatLoader>\n          <br />\n          Loading...\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}