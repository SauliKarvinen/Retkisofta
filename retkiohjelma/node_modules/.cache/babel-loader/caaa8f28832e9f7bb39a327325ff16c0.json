{"ast":null,"code":"import _objectSpread from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import ReactMapGl,{Marker,Popup}from\"react-map-gl\";import{useTransition,animated}from\"react-spring\";import icon from\"./red_pin.png\";import\"./styles.css\";// Mapbox-gl access-token\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var access_token=\"pk.eyJ1Ijoic2F1bGlrIiwiYSI6ImNrcWM4NXJoYzAwdzkybm56djVka2VzZW0ifQ.QmYDZh6DNEwu5ITY9lQ6Ag\";// Kartta default-arvoilla\nfunction Map(props){var _useState=useState({latitude:62.952544,longitude:26.040375,zoom:5,transitionDuration:500}),_useState2=_slicedToArray(_useState,2),viewport=_useState2[0],setViewport=_useState2[1];var _useState3=useState(props.rajatutPaikat),_useState4=_slicedToArray(_useState3,2),paikat=_useState4[0],setPaikat=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),valittuMarker=_useState6[0],setValittuMarker=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),lat=_useState8[0],setLat=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),long=_useState10[0],setLong=_useState10[1];// Markereiden fade-in\nvar transition=useTransition(paikat[0],{from:{opacity:0},enter:{opacity:1},delay:500});// Päivitetään paikat\nuseEffect(function(){setPaikat(props.rajatutPaikat);setValittuMarker(null);},[props.rajatutPaikat]);// Kun koordinaatit muuttuvat, kohdistetaan kartta uuteen sijaintiin\nuseEffect(function(){if(props.newLat||props.newLong){setValittuMarker(null);setViewport({latitude:parseFloat(props.newLat),longitude:parseFloat(props.newLong),zoom:5,transitionDuration:500});}},[props.newLat,props.newLong]);// Avaa popup ikkunan\nvar naytaPopUp=function naytaPopUp(paikka){return/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:paikka.nimi}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tyyppi: \",paikka.tyyppi]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Maakunta: \",paikka.maakunta]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Koordinaatit: \",paikka.koordinaatti]})]});};// Palauttaa kartan\nreturn/*#__PURE__*/_jsxs(ReactMapGl,_objectSpread(_objectSpread({className:\"map\"},viewport),{},{mapboxApiAccessToken:access_token,mapStyle:\"mapbox://styles/mapbox/streets-v11\",height:715,width:800,onViewportChange:function onViewportChange(viewport){setViewport(viewport);},children:[paikat.length>0&&transition.length>0&&transition(function(styles,paikka){var koord=paikka.koordinaatti.split(\",\");return/*#__PURE__*/_jsx(animated.div,{style:styles,children:/*#__PURE__*/_jsx(Marker,{className:\"markers\",latitude:parseFloat(koord[0]),longitude:parseFloat(koord[1]),offsetLeft:-25/2,offsetTop:-25/2,onClick:function onClick(){setValittuMarker(paikka);var koordinaatit=paikka.koordinaatti.split(\",\");setLat(parseFloat(koordinaatit[0]));setLong(parseFloat(koordinaatit[1]));},children:/*#__PURE__*/_jsx(\"img\",{className:\"marker-images\",src:icon,alt:\"no image\"})})},paikka.nimi);}),valittuMarker&&lat&&long&&/*#__PURE__*/_jsx(Popup,{latitude:lat,longitude:long,anchor:\"bottom\",offsetTop:-25/2,onClose:function onClose(){return setValittuMarker(null);},children:naytaPopUp(valittuMarker)})]}));}export default Map;","map":{"version":3,"sources":["C:/Users/sauli/OneDrive/Työpöytä/JAMK/retkisofta/retkiohjelma/src/Map.js"],"names":["React","useState","useEffect","ReactMapGl","Marker","Popup","useTransition","animated","icon","access_token","Map","props","latitude","longitude","zoom","transitionDuration","viewport","setViewport","rajatutPaikat","paikat","setPaikat","valittuMarker","setValittuMarker","lat","setLat","long","setLong","transition","from","opacity","enter","delay","newLat","newLong","parseFloat","naytaPopUp","paikka","nimi","tyyppi","maakunta","koordinaatti","length","styles","koord","split","koordinaatit"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ReactMapGl, { Marker, Popup } from \"react-map-gl\";\r\nimport { useTransition, animated } from \"react-spring\";\r\nimport icon from \"./red_pin.png\";\r\nimport \"./styles.css\";\r\n\r\n// Mapbox-gl access-token\r\nconst access_token =\r\n  \"pk.eyJ1Ijoic2F1bGlrIiwiYSI6ImNrcWM4NXJoYzAwdzkybm56djVka2VzZW0ifQ.QmYDZh6DNEwu5ITY9lQ6Ag\";\r\n\r\n// Kartta default-arvoilla\r\nfunction Map(props) {\r\n  const [viewport, setViewport] = useState({\r\n    latitude: 62.952544,\r\n    longitude: 26.040375,\r\n    zoom: 5,\r\n    transitionDuration: 500,\r\n  });\r\n\r\n  const [paikat, setPaikat] = useState(props.rajatutPaikat);\r\n  const [valittuMarker, setValittuMarker] = useState();\r\n  const [lat, setLat] = useState();\r\n  const [long, setLong] = useState();\r\n  // Markereiden fade-in\r\n  const transition = useTransition(paikat[0], {\r\n    from: { opacity: 0 },\r\n    enter: { opacity: 1 },\r\n    delay: 500,\r\n  });\r\n\r\n  // Päivitetään paikat\r\n  useEffect(() => {\r\n    setPaikat(props.rajatutPaikat);\r\n    setValittuMarker(null);\r\n  }, [props.rajatutPaikat]);\r\n\r\n  // Kun koordinaatit muuttuvat, kohdistetaan kartta uuteen sijaintiin\r\n  useEffect(() => {\r\n    if (props.newLat || props.newLong) {\r\n      setValittuMarker(null);\r\n      setViewport({\r\n        latitude: parseFloat(props.newLat),\r\n        longitude: parseFloat(props.newLong),\r\n        zoom: 5,\r\n        transitionDuration: 500,\r\n      });\r\n    }\r\n  }, [props.newLat, props.newLong]);\r\n\r\n  // Avaa popup ikkunan\r\n  const naytaPopUp = (paikka) => {\r\n    return (\r\n      <div className=\"popup\">\r\n        <h3>{paikka.nimi}</h3>\r\n        <p>Tyyppi: {paikka.tyyppi}</p>\r\n        <p>Maakunta: {paikka.maakunta}</p>\r\n        <p>Koordinaatit: {paikka.koordinaatti}</p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Palauttaa kartan\r\n  return (\r\n    <ReactMapGl\r\n      className=\"map\"\r\n      {...viewport}\r\n      mapboxApiAccessToken={access_token}\r\n      mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n      height={715}\r\n      width={800}\r\n      onViewportChange={(viewport) => {\r\n        setViewport(viewport);\r\n      }}\r\n    >\r\n      {/* \r\n      Jos paikkoja on valittu, lisää markerit\r\n       */}\r\n      {paikat.length > 0 &&\r\n        transition.length > 0 &&\r\n        transition((styles, paikka) => {\r\n          let koord = paikka.koordinaatti.split(\",\");\r\n          return (\r\n            <animated.div key={paikka.nimi} style={styles}>\r\n              <Marker\r\n                className=\"markers\"\r\n                latitude={parseFloat(koord[0])}\r\n                longitude={parseFloat(koord[1])}\r\n                offsetLeft={-25 / 2}\r\n                offsetTop={-25 / 2}\r\n                onClick={() => {\r\n                  setValittuMarker(paikka);\r\n                  let koordinaatit = paikka.koordinaatti.split(\",\");\r\n                  setLat(parseFloat(koordinaatit[0]));\r\n                  setLong(parseFloat(koordinaatit[1]));\r\n                }}\r\n              >\r\n                <img className=\"marker-images\" src={icon} alt=\"no image\"></img>\r\n              </Marker>\r\n            </animated.div>\r\n          );\r\n        })}\r\n\r\n      {/* \r\n        Jos markeria on klikattu, avataan popup\r\n        */}\r\n      {valittuMarker && lat && long && (\r\n        <Popup\r\n          latitude={lat}\r\n          longitude={long}\r\n          anchor=\"bottom\"\r\n          offsetTop={-25 / 2}\r\n          onClose={() => setValittuMarker(null)}\r\n        >\r\n          {naytaPopUp(valittuMarker)}\r\n        </Popup>\r\n      )}\r\n    </ReactMapGl>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n"]},"metadata":{},"sourceType":"module"}