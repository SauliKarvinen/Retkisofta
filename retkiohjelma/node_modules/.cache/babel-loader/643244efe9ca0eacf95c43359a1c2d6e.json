{"ast":null,"code":"import _toConsumableArray from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sauli/OneDrive/Ty\\xF6p\\xF6yt\\xE4/JAMK/retkisofta/retkiohjelma/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Pie}from\"react-chartjs-2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PieChart(props){var _useState=useState(props.paikat),_useState2=_slicedToArray(_useState,2),tyypit=_useState2[0],setTyypit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),prosentit=_useState4[0],setProsentit=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),render=_useState6[0],setRender=_useState6[1];// Päivittää tyypit\nuseEffect(function(){setTyypit(poistaNaytaKaikkiVaihtoehto(props.paikat));laskeMaarat();setRender(true);},[props.paikatMaakunnassa]);// Laskee paikkojen määrät\nvar laskeMaarat=function laskeMaarat(){var laavut=0;var kodat=0;var paivatuvat=0;var nuotiopaikat=0;var luolat=0;var auotiotuvat=0;var ruokailukatokset=0;var nahtavyydet=0;var lintutornit=0;var varaustuvat=0;var kammit=0;var porokampat=0;var lahteet=0;var maarat=[];function f(){return _f.apply(this,arguments);}function _f(){_f=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _iterator,_step,paikka;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_iterator=_createForOfIteratorHelper(props.paikatMaakunnassa[0]);_context.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context.next=37;break;}paikka=_step.value;_context.t0=paikka.tyyppi;_context.next=_context.t0===\"Laavu\"?8:_context.t0===\"Kota\"?10:_context.t0===\"Päivätupa\"?12:_context.t0===\"Nuotiopaikka\"?14:_context.t0===\"Luola\"?16:_context.t0===\"Autiotupa\"?18:_context.t0===\"Ruokailukatos\"?20:_context.t0===\"Nähtävyys\"?22:_context.t0===\"Lintutorni\"?24:_context.t0===\"Varaustupa\"?26:_context.t0===\"Kammi\"?28:_context.t0===\"Porokämppä\"?30:_context.t0===\"Lähde\"?32:34;break;case 8:laavut++;return _context.abrupt(\"break\",35);case 10:kodat++;return _context.abrupt(\"break\",35);case 12:paivatuvat++;return _context.abrupt(\"break\",35);case 14:nuotiopaikat++;return _context.abrupt(\"break\",35);case 16:luolat++;return _context.abrupt(\"break\",35);case 18:auotiotuvat++;return _context.abrupt(\"break\",35);case 20:ruokailukatokset++;return _context.abrupt(\"break\",35);case 22:nahtavyydet++;return _context.abrupt(\"break\",35);case 24:lintutornit++;return _context.abrupt(\"break\",35);case 26:varaustuvat++;return _context.abrupt(\"break\",35);case 28:kammit++;return _context.abrupt(\"break\",35);case 30:porokampat++;return _context.abrupt(\"break\",35);case 32:lahteet++;return _context.abrupt(\"break\",35);case 34:return _context.abrupt(\"break\",35);case 35:_context.next=3;break;case 37:_context.next=42;break;case 39:_context.prev=39;_context.t1=_context[\"catch\"](1);_iterator.e(_context.t1);case 42:_context.prev=42;_iterator.f();return _context.finish(42);case 45:case\"end\":return _context.stop();}}},_callee,null,[[1,39,42,45]]);}));return _f.apply(this,arguments);}f().then(function(){maarat=[laavut,kodat,paivatuvat,nuotiopaikat,luolat,auotiotuvat,ruokailukatokset,nahtavyydet,lintutornit,varaustuvat,kammit,porokampat,lahteet];laskeProsentit(maarat);});};// Poistaa 'Näytä kaikki' -vaihtoehdon listasta\nvar poistaNaytaKaikkiVaihtoehto=function poistaNaytaKaikkiVaihtoehto(arr){arr.shift();return arr;};// Laskee prosenttiosuudet paikoista\nvar laskeProsentit=function laskeProsentit(maarat){var paikkoja=props.paikatMaakunnassa[0].length;var pros=[];function f(){return _f2.apply(this,arguments);}function _f2(){_f2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:pros=maarat.map(function(maara){return(maara/paikkoja*100).toFixed();});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _f2.apply(this,arguments);}f().then(function(){var listassaOnDataa=false;var _iterator2=_createForOfIteratorHelper(maarat),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var m=_step2.value;if(m>0){listassaOnDataa=true;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(listassaOnDataa){setProsentit(pros);}else{setProsentit([100]);}});};// Palauttaa kaavion\nreturn render&&/*#__PURE__*/_jsxs(\"div\",{className:\"piechart-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Prosenttia paikoista\"}),/*#__PURE__*/_jsx(Pie,{data:{labels:_toConsumableArray(tyypit),datasets:[{label:\"Prosenttia paikoista\",data:_toConsumableArray(prosentit),backgroundColor:[\"rgba(255, 0, 0, 0.8)\",\"rgba(255, 100, 0, 0.8)\",\"rgba(255, 200, 0, 0.8)\",\"rgba(200, 255, 0, 0.8)\",\"rgba(100, 255, 0, 0.8)\",\"rgba(0, 255, 0, 0.8)\",\"rgba(0, 255, 100, 0.8)\",\"rgba(0, 255, 200, 0.8)\",\"rgba(0, 200, 255, 0.8)\",\"rgba(0, 100, 255, 0.8)\",\"rgba(0, 0, 255, 0.8)\",\"rgba(100, 0, 255, 0.8)\",\"rgba(100, 150, 255, 0.8)\"]}]},options:{animation:{duration:0}}})]});}export default PieChart;","map":{"version":3,"sources":["C:/Users/sauli/OneDrive/Työpöytä/JAMK/retkisofta/retkiohjelma/src/PieChart.js"],"names":["React","useState","useEffect","Pie","PieChart","props","paikat","tyypit","setTyypit","prosentit","setProsentit","render","setRender","poistaNaytaKaikkiVaihtoehto","laskeMaarat","paikatMaakunnassa","laavut","kodat","paivatuvat","nuotiopaikat","luolat","auotiotuvat","ruokailukatokset","nahtavyydet","lintutornit","varaustuvat","kammit","porokampat","lahteet","maarat","f","paikka","tyyppi","then","laskeProsentit","arr","shift","paikkoja","length","pros","map","maara","toFixed","listassaOnDataa","m","labels","datasets","label","data","backgroundColor","animation","duration"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\n\r\nfunction PieChart(props) {\r\n  const [tyypit, setTyypit] = useState(props.paikat);\r\n  const [prosentit, setProsentit] = useState([]);\r\n  const [render, setRender] = useState(false);\r\n\r\n  // Päivittää tyypit\r\n  useEffect(() => {\r\n    setTyypit(poistaNaytaKaikkiVaihtoehto(props.paikat));\r\n    laskeMaarat();\r\n    setRender(true);\r\n  }, [props.paikatMaakunnassa]);\r\n\r\n  // Laskee paikkojen määrät\r\n  const laskeMaarat = () => {\r\n    let laavut = 0;\r\n    let kodat = 0;\r\n    let paivatuvat = 0;\r\n    let nuotiopaikat = 0;\r\n    let luolat = 0;\r\n    let auotiotuvat = 0;\r\n    let ruokailukatokset = 0;\r\n    let nahtavyydet = 0;\r\n    let lintutornit = 0;\r\n    let varaustuvat = 0;\r\n    let kammit = 0;\r\n    let porokampat = 0;\r\n    let lahteet = 0;\r\n    let maarat = [];\r\n\r\n    async function f() {\r\n      for (let paikka of props.paikatMaakunnassa[0]) {\r\n        switch (paikka.tyyppi) {\r\n          case \"Laavu\":\r\n            laavut++;\r\n            break;\r\n          case \"Kota\":\r\n            kodat++;\r\n            break;\r\n          case \"Päivätupa\":\r\n            paivatuvat++;\r\n            break;\r\n          case \"Nuotiopaikka\":\r\n            nuotiopaikat++;\r\n            break;\r\n          case \"Luola\":\r\n            luolat++;\r\n            break;\r\n          case \"Autiotupa\":\r\n            auotiotuvat++;\r\n            break;\r\n          case \"Ruokailukatos\":\r\n            ruokailukatokset++;\r\n            break;\r\n          case \"Nähtävyys\":\r\n            nahtavyydet++;\r\n            break;\r\n          case \"Lintutorni\":\r\n            lintutornit++;\r\n            break;\r\n          case \"Varaustupa\":\r\n            varaustuvat++;\r\n            break;\r\n          case \"Kammi\":\r\n            kammit++;\r\n            break;\r\n          case \"Porokämppä\":\r\n            porokampat++;\r\n            break;\r\n          case \"Lähde\":\r\n            lahteet++;\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    f().then(() => {\r\n      maarat = [\r\n        laavut,\r\n        kodat,\r\n        paivatuvat,\r\n        nuotiopaikat,\r\n        luolat,\r\n        auotiotuvat,\r\n        ruokailukatokset,\r\n        nahtavyydet,\r\n        lintutornit,\r\n        varaustuvat,\r\n        kammit,\r\n        porokampat,\r\n        lahteet,\r\n      ];\r\n      laskeProsentit(maarat);\r\n    });\r\n  };\r\n\r\n  // Poistaa 'Näytä kaikki' -vaihtoehdon listasta\r\n  const poistaNaytaKaikkiVaihtoehto = (arr) => {\r\n    arr.shift();\r\n    return arr;\r\n  };\r\n\r\n  // Laskee prosenttiosuudet paikoista\r\n  const laskeProsentit = (maarat) => {\r\n    const paikkoja = props.paikatMaakunnassa[0].length;\r\n    let pros = [];\r\n    async function f() {\r\n      pros = maarat.map((maara) => ((maara / paikkoja) * 100).toFixed());\r\n    }\r\n\r\n    f().then(() => {\r\n      let listassaOnDataa = false;\r\n      for (let m of maarat) {\r\n        if (m > 0) {\r\n          listassaOnDataa = true;\r\n        }\r\n      }\r\n\r\n      if (listassaOnDataa) {\r\n        setProsentit(pros);\r\n      } else {\r\n        setProsentit([100]);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Palauttaa kaavion\r\n  return (\r\n    render && (\r\n      <div className=\"piechart-wrapper\">\r\n        <h2>Prosenttia paikoista</h2>\r\n        <Pie\r\n          data={{\r\n            labels: [...tyypit],\r\n            datasets: [\r\n              {\r\n                label: \"Prosenttia paikoista\",\r\n                data: [...prosentit],\r\n                backgroundColor: [\r\n                  \"rgba(255, 0, 0, 0.8)\",\r\n                  \"rgba(255, 100, 0, 0.8)\",\r\n                  \"rgba(255, 200, 0, 0.8)\",\r\n                  \"rgba(200, 255, 0, 0.8)\",\r\n                  \"rgba(100, 255, 0, 0.8)\",\r\n                  \"rgba(0, 255, 0, 0.8)\",\r\n                  \"rgba(0, 255, 100, 0.8)\",\r\n                  \"rgba(0, 255, 200, 0.8)\",\r\n                  \"rgba(0, 200, 255, 0.8)\",\r\n                  \"rgba(0, 100, 255, 0.8)\",\r\n                  \"rgba(0, 0, 255, 0.8)\",\r\n                  \"rgba(100, 0, 255, 0.8)\",\r\n                  \"rgba(100, 150, 255, 0.8)\",\r\n                ],\r\n              },\r\n            ],\r\n          }}\r\n          options={{\r\n            animation: {\r\n              duration: 0,\r\n            },\r\n          }}\r\n        ></Pie>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default PieChart;\r\n"]},"metadata":{},"sourceType":"module"}