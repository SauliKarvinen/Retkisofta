{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sauli\\\\OneDrive\\\\Ty\\xF6p\\xF6yt\\xE4\\\\JAMK\\\\retkisofta\\\\retkiohjelma\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSpring, animated } from \"react-spring\";\nimport Valikot from \"./Valikot\";\nimport Map from \"./Map\";\nimport BarChart from \"./BarChart\";\nimport PieChart from \"./PieChart\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://tulikartta.fi/api-json2.php\";\nlet dropmenuMaakunnatIsVisible = false;\nlet dropmenuTyypitIsVisible = false;\n\nfunction App() {\n  _s();\n\n  const [paikat, setPaikat] = useState([]);\n  const [maakunnat, setMaakunnat] = useState([]);\n  const [tyypit, setTyypit] = useState([]);\n  const [valittuMaakunta, setValittuMaakunta] = useState(\"\");\n  const [valittuTyyppi, setValittuTyyppi] = useState(\"\");\n  const [rajatutPaikat, setRajatutPaikat] = useState([]);\n  const [paikatMaakunnassa, setPaikatMaakunnassa] = useState([]);\n  const [newLat, setNewLat] = useState();\n  const [newLong, setNewLong] = useState();\n  useEffect(() => {\n    fetch(API_URL, {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }).then(response => {\n      console.log(response);\n      return response.json();\n    }).then(jsonData => {\n      const paikatArr = [...jsonData];\n      const maakunnatArr = [];\n      const tyypitArr = [];\n      tyypitArr.push(\"Näytä kaikki\");\n\n      for (let i of paikatArr) {\n        maakunnatArr.push(i.maakunta);\n        tyypitArr.push(i.tyyppi);\n      }\n\n      const maakunnatRemoveDuplicates = [...new Set(maakunnatArr)];\n      const tyypitRemoveDublicates = [...new Set(tyypitArr)];\n      setPaikat([...jsonData]);\n      setMaakunnat([...maakunnatRemoveDuplicates]);\n      setTyypit([...tyypitRemoveDublicates]); //paivitaPaikatMaakunnassa();\n    });\n  }, []);\n  useEffect(() => {\n    paivitaPaikatMaakunnassa(); //paivitaPaikat();\n\n    return () => {\n      console.log(\"CLEANUP\");\n    };\n  }, [valittuMaakunta]);\n  useEffect(() => {\n    paivitaPaikat();\n  }, [valittuTyyppi]);\n\n  const paivitaPaikatMaakunnassa = () => {\n    /* const paikatMaakunnassaArr = paikat.filter(\n      (paikka) => paikka.maakunta == valittuMaakunta\n    ); */\n    let paikatMaakunnassaArr = [];\n\n    if (valittuTyyppi == \"Näytä kaikki\" || valittuTyyppi == \"\") {\n      paikatMaakunnassaArr = paikat.filter(paikka => paikka.maakunta == valittuMaakunta);\n    } else {\n      paikatMaakunnassaArr = paikat.filter(paikka => paikka.maakunta == valittuMaakunta && paikka.tyyppi == valittuTyyppi);\n    }\n\n    setPaikatMaakunnassa([paikatMaakunnassaArr]);\n    setRajatutPaikat([paikatMaakunnassaArr]);\n\n    if (valittuMaakunta != \"\" && paikatMaakunnassaArr[0]) {\n      const splitKoordinaatit = paikatMaakunnassaArr[0].koordinaatti.split(\",\");\n      setNewLat(splitKoordinaatit[0]);\n      setNewLong(splitKoordinaatit[1]);\n    }\n  };\n\n  const naytaMaakunnat = () => {\n    /* let valikko = document.getElementById(\"maakunnatContainer\");\n     dropmenuMaakunnatIsVisible = !dropmenuMaakunnatIsVisible;\n    if (dropmenuMaakunnatIsVisible) {\n      valikko.style.display = \"block\";\n    } else {\n      valikko.style.display = \"none\";\n    } */\n\n    /* let testi = document.getElementById(\"testicontainer\");\n    testi.appendChild(\n      <Spring from={{ opacity: 0 }} to={{ opacity: 1 }}>\n        {(props) => <div style={props}>TERVETERVE</div>}\n      </Spring>\n    ); */\n    return /*#__PURE__*/_jsxDEV(Spring, {\n      from: {\n        opacity: 0\n      },\n      to: {\n        opacity: 1\n      },\n      children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: props,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: 200,\n            width: 200,\n            backgroundColor: \"blue\"\n          },\n          children: \"MOIMOIMOI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  };\n\n  const naytaTyypit = () => {\n    let valikko = document.getElementById(\"tyypitContainer\");\n    dropmenuTyypitIsVisible = !dropmenuTyypitIsVisible;\n\n    if (dropmenuTyypitIsVisible) {\n      valikko.style.display = \"block\";\n    } else {\n      valikko.style.display = \"none\";\n    }\n  };\n\n  const paivitaPaikat = () => {\n    if (valittuMaakunta != \"\" && valittuTyyppi != \"Näytä kaikki\") {\n      let rajatutPaikat = [];\n\n      async function f() {\n        {\n          rajatutPaikat = paikat.filter(paikka => paikka.maakunta == valittuMaakunta && paikka.tyyppi == valittuTyyppi);\n        }\n      }\n\n      f().then(() => setRajatutPaikat([rajatutPaikat]));\n    } else if (valittuTyyppi == \"Näytä kaikki\") {\n      //setRajatutPaikat([...paikatMaakunnassa]);\n      paivitaPaikatMaakunnassa();\n    }\n  };\n\n  const luoMaakuntaValikko = () => {\n    let selectBox = document.getElementById(\"inputMaakunnat\");\n    const options = Object.values(maakunnat).map((maakunta, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"valinnat\",\n      onClick: e => {\n        selectBox.value = e.target.innerHTML;\n        setValittuMaakunta(e.target.innerHTML);\n        selectBox.focus();\n        document.getElementById(\"maakunnatContainer\").style.display = \"none\";\n        dropmenuMaakunnatIsVisible = false;\n      },\n      children: maakunta\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"maakunnatContainer\",\n      className: \"options\",\n      style: {\n        display: \"none\"\n      },\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this);\n  };\n\n  const luoTyypitValikko = () => {\n    let selectBox = document.getElementById(\"inputTyypit\");\n    const options = Object.values(tyypit).map((tyyppi, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"valinnat\",\n      onClick: e => {\n        selectBox.value = e.target.innerHTML;\n        setValittuTyyppi(e.target.innerHTML);\n        selectBox.focus();\n        document.getElementById(\"tyypitContainer\").style.display = \"none\";\n        dropmenuTyypitIsVisible = false;\n      },\n      children: tyyppi\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"tyypitContainer\",\n      className: \"options\",\n      style: {\n        display: \"none\"\n      },\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"inputMaakunnat\",\n        type: \"text\",\n        value: valittuMaakunta,\n        onClick: () => naytaMaakunnat(),\n        placeholder: \"Valitse maakunta\",\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), luoMaakuntaValikko(), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"inputTyypit\",\n        inputMode: \"text\",\n        value: valittuTyyppi,\n        onClick: () => {\n          naytaTyypit();\n        },\n        placeholder: \"Valitse tyyppi\",\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Spring, {\n        from: {\n          opacity: 0,\n          marginTop: -200\n        },\n        to: {\n          opacity: 1,\n          marginTop: 0\n        },\n        children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: props,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: 200,\n              width: 200,\n              backgroundColor: \"blue\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"MOIMOIMO\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), luoTyypitValikko()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), maakunnat.length > 0 && tyypit.length > 0 && paikat && rajatutPaikat && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-chart-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Map, {\n        className: \"map\",\n        maakunta: valittuMaakunta,\n        tyyppi: valittuTyyppi,\n        kaikkiPaikat: [...paikatMaakunnassa],\n        rajatutPaikat: [...rajatutPaikat],\n        newLat: newLat,\n        newLong: newLong\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(BarChart, {\n          tyypit: [...tyypit],\n          paikatMaakunnassa: paikatMaakunnassa,\n          rajatutPaikat: rajatutPaikat,\n          maakunta: valittuMaakunta\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(PieChart, {\n          paikat: [...tyypit],\n          paikatMaakunnassa: paikatMaakunnassa,\n          maakunta: valittuMaakunta\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"vnNEEu68lnYpQ6NJIU1rzJ7mFgQ=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/sauli/OneDrive/Työpöytä/JAMK/retkisofta/retkiohjelma/src/App.js"],"names":["React","useState","useEffect","useSpring","animated","Valikot","Map","BarChart","PieChart","API_URL","dropmenuMaakunnatIsVisible","dropmenuTyypitIsVisible","App","paikat","setPaikat","maakunnat","setMaakunnat","tyypit","setTyypit","valittuMaakunta","setValittuMaakunta","valittuTyyppi","setValittuTyyppi","rajatutPaikat","setRajatutPaikat","paikatMaakunnassa","setPaikatMaakunnassa","newLat","setNewLat","newLong","setNewLong","fetch","Accept","then","response","console","log","json","jsonData","paikatArr","maakunnatArr","tyypitArr","push","i","maakunta","tyyppi","maakunnatRemoveDuplicates","Set","tyypitRemoveDublicates","paivitaPaikatMaakunnassa","paivitaPaikat","paikatMaakunnassaArr","filter","paikka","splitKoordinaatit","koordinaatti","split","naytaMaakunnat","opacity","props","height","width","backgroundColor","naytaTyypit","valikko","document","getElementById","style","display","f","luoMaakuntaValikko","selectBox","options","Object","values","map","index","e","value","target","innerHTML","focus","luoTyypitValikko","marginTop","length"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,cAApC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,QAAP,MAAqB,YAArB;;AAEA,MAAMC,OAAO,GAAG,qCAAhB;AACA,IAAIC,0BAA0B,GAAG,KAAjC;AACA,IAAIC,uBAAuB,GAAG,KAA9B;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACgB,MAAD,EAASC,SAAT,IAAsBjB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACkB,eAAD,EAAkBC,kBAAlB,IAAwCnB,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACoB,aAAD,EAAgBC,gBAAhB,IAAoCrB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACsB,aAAD,EAAgBC,gBAAhB,IAAoCvB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACwB,iBAAD,EAAoBC,oBAApB,IAA4CzB,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAAC0B,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,EAApC;AACA,QAAM,CAAC4B,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,EAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd6B,IAAAA,KAAK,CAACtB,OAAD,EAAU;AACb,sBAAgB,kBADH;AAEbuB,MAAAA,MAAM,EAAE;AAFK,KAAV,CAAL,CAIGC,IAJH,CAISC,QAAD,IAAc;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,aAAOA,QAAQ,CAACG,IAAT,EAAP;AACD,KAPH,EAQGJ,IARH,CAQSK,QAAD,IAAc;AAClB,YAAMC,SAAS,GAAG,CAAC,GAAGD,QAAJ,CAAlB;AACA,YAAME,YAAY,GAAG,EAArB;AACA,YAAMC,SAAS,GAAG,EAAlB;AAEAA,MAAAA,SAAS,CAACC,IAAV,CAAe,cAAf;;AAEA,WAAK,IAAIC,CAAT,IAAcJ,SAAd,EAAyB;AACvBC,QAAAA,YAAY,CAACE,IAAb,CAAkBC,CAAC,CAACC,QAApB;AACAH,QAAAA,SAAS,CAACC,IAAV,CAAeC,CAAC,CAACE,MAAjB;AACD;;AACD,YAAMC,yBAAyB,GAAG,CAAC,GAAG,IAAIC,GAAJ,CAAQP,YAAR,CAAJ,CAAlC;AACA,YAAMQ,sBAAsB,GAAG,CAAC,GAAG,IAAID,GAAJ,CAAQN,SAAR,CAAJ,CAA/B;AAEA3B,MAAAA,SAAS,CAAC,CAAC,GAAGwB,QAAJ,CAAD,CAAT;AACAtB,MAAAA,YAAY,CAAC,CAAC,GAAG8B,yBAAJ,CAAD,CAAZ;AACA5B,MAAAA,SAAS,CAAC,CAAC,GAAG8B,sBAAJ,CAAD,CAAT,CAhBkB,CAiBlB;AACD,KA1BH;AA2BD,GA5BQ,EA4BN,EA5BM,CAAT;AA8BA9C,EAAAA,SAAS,CAAC,MAAM;AACd+C,IAAAA,wBAAwB,GADV,CAEd;;AACA,WAAO,MAAM;AACXd,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,KAFD;AAGD,GANQ,EAMN,CAACjB,eAAD,CANM,CAAT;AAQAjB,EAAAA,SAAS,CAAC,MAAM;AACdgD,IAAAA,aAAa;AACd,GAFQ,EAEN,CAAC7B,aAAD,CAFM,CAAT;;AAIA,QAAM4B,wBAAwB,GAAG,MAAM;AACrC;AACJ;AACA;AACI,QAAIE,oBAAoB,GAAG,EAA3B;;AAEA,QAAI9B,aAAa,IAAI,cAAjB,IAAmCA,aAAa,IAAI,EAAxD,EAA4D;AAC1D8B,MAAAA,oBAAoB,GAAGtC,MAAM,CAACuC,MAAP,CACpBC,MAAD,IAAYA,MAAM,CAACT,QAAP,IAAmBzB,eADV,CAAvB;AAGD,KAJD,MAIO;AACLgC,MAAAA,oBAAoB,GAAGtC,MAAM,CAACuC,MAAP,CACpBC,MAAD,IACEA,MAAM,CAACT,QAAP,IAAmBzB,eAAnB,IAAsCkC,MAAM,CAACR,MAAP,IAAiBxB,aAFpC,CAAvB;AAID;;AACDK,IAAAA,oBAAoB,CAAC,CAACyB,oBAAD,CAAD,CAApB;AACA3B,IAAAA,gBAAgB,CAAC,CAAC2B,oBAAD,CAAD,CAAhB;;AAEA,QAAIhC,eAAe,IAAI,EAAnB,IAAyBgC,oBAAoB,CAAC,CAAD,CAAjD,EAAsD;AACpD,YAAMG,iBAAiB,GAAGH,oBAAoB,CAAC,CAAD,CAApB,CAAwBI,YAAxB,CAAqCC,KAArC,CAA2C,GAA3C,CAA1B;AACA5B,MAAAA,SAAS,CAAC0B,iBAAiB,CAAC,CAAD,CAAlB,CAAT;AACAxB,MAAAA,UAAU,CAACwB,iBAAiB,CAAC,CAAD,CAAlB,CAAV;AACD;AACF,GAxBD;;AA0BA,QAAMG,cAAc,GAAG,MAAM;AAC3B;AACJ;AACA;AACA;AACA;AACA;AACA;;AAGI;AACJ;AACA;AACA;AACA;AACA;AAEI,wBACE,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAd;AAA8B,MAAA,EAAE,EAAE;AAAEA,QAAAA,OAAO,EAAE;AAAX,OAAlC;AAAA,gBACIC,KAAD,iBACC;AAAK,QAAA,KAAK,EAAEA,KAAZ;AAAA,+BACE;AAAK,UAAA,KAAK,EAAE;AAAEC,YAAAA,MAAM,EAAE,GAAV;AAAeC,YAAAA,KAAK,EAAE,GAAtB;AAA2BC,YAAAA,eAAe,EAAE;AAA5C,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YADF;AAWD,GA5BD;;AA8BA,QAAMC,WAAW,GAAG,MAAM;AACxB,QAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAd;AAEAvD,IAAAA,uBAAuB,GAAG,CAACA,uBAA3B;;AACA,QAAIA,uBAAJ,EAA6B;AAC3BqD,MAAAA,OAAO,CAACG,KAAR,CAAcC,OAAd,GAAwB,OAAxB;AACD,KAFD,MAEO;AACLJ,MAAAA,OAAO,CAACG,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACD;AACF,GATD;;AAWA,QAAMlB,aAAa,GAAG,MAAM;AAC1B,QAAI/B,eAAe,IAAI,EAAnB,IAAyBE,aAAa,IAAI,cAA9C,EAA8D;AAC5D,UAAIE,aAAa,GAAG,EAApB;;AACA,qBAAe8C,CAAf,GAAmB;AACjB;AACE9C,UAAAA,aAAa,GAAGV,MAAM,CAACuC,MAAP,CACbC,MAAD,IACEA,MAAM,CAACT,QAAP,IAAmBzB,eAAnB,IACAkC,MAAM,CAACR,MAAP,IAAiBxB,aAHL,CAAhB;AAKD;AACF;;AACDgD,MAAAA,CAAC,GAAGpC,IAAJ,CAAS,MAAMT,gBAAgB,CAAC,CAACD,aAAD,CAAD,CAA/B;AACD,KAZD,MAYO,IAAIF,aAAa,IAAI,cAArB,EAAqC;AAC1C;AACA4B,MAAAA,wBAAwB;AACzB;AACF,GAjBD;;AAmBA,QAAMqB,kBAAkB,GAAG,MAAM;AAC/B,QAAIC,SAAS,GAAGN,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAhB;AACA,UAAMM,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc3D,SAAd,EAAyB4D,GAAzB,CAA6B,CAAC/B,QAAD,EAAWgC,KAAX,kBAC3C;AAEE,MAAA,SAAS,EAAC,UAFZ;AAGE,MAAA,OAAO,EAAGC,CAAD,IAAO;AACdN,QAAAA,SAAS,CAACO,KAAV,GAAkBD,CAAC,CAACE,MAAF,CAASC,SAA3B;AACA5D,QAAAA,kBAAkB,CAACyD,CAAC,CAACE,MAAF,CAASC,SAAV,CAAlB;AACAT,QAAAA,SAAS,CAACU,KAAV;AACAhB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACA1D,QAAAA,0BAA0B,GAAG,KAA7B;AACD,OATH;AAAA,gBAWGkC;AAXH,OACOgC,KADP;AAAA;AAAA;AAAA;AAAA,YADc,CAAhB;AAgBA,wBACE;AACE,MAAA,EAAE,EAAE,oBADN;AAEE,MAAA,SAAS,EAAC,SAFZ;AAGE,MAAA,KAAK,EAAE;AAAER,QAAAA,OAAO,EAAE;AAAX,OAHT;AAAA,gBAKGI;AALH;AAAA;AAAA;AAAA;AAAA,YADF;AASD,GA3BD;;AA6BA,QAAMU,gBAAgB,GAAG,MAAM;AAC7B,QAAIX,SAAS,GAAGN,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAhB;AACA,UAAMM,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAczD,MAAd,EAAsB0D,GAAtB,CAA0B,CAAC9B,MAAD,EAAS+B,KAAT,kBACxC;AAEE,MAAA,SAAS,EAAC,UAFZ;AAGE,MAAA,OAAO,EAAGC,CAAD,IAAO;AACdN,QAAAA,SAAS,CAACO,KAAV,GAAkBD,CAAC,CAACE,MAAF,CAASC,SAA3B;AACA1D,QAAAA,gBAAgB,CAACuD,CAAC,CAACE,MAAF,CAASC,SAAV,CAAhB;AACAT,QAAAA,SAAS,CAACU,KAAV;AACAhB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,KAA3C,CAAiDC,OAAjD,GAA2D,MAA3D;AACAzD,QAAAA,uBAAuB,GAAG,KAA1B;AACD,OATH;AAAA,gBAWGkC;AAXH,OACO+B,KADP;AAAA;AAAA;AAAA;AAAA,YADc,CAAhB;AAgBA,wBACE;AACE,MAAA,EAAE,EAAE,iBADN;AAEE,MAAA,SAAS,EAAC,SAFZ;AAGE,MAAA,KAAK,EAAE;AAAER,QAAAA,OAAO,EAAE;AAAX,OAHT;AAAA,gBAKGI;AALH;AAAA;AAAA;AAAA;AAAA,YADF;AASD,GA3BD;;AA6BA,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACE;AAAA,8BACE;AACE,QAAA,EAAE,EAAE,gBADN;AAEE,QAAA,IAAI,EAAE,MAFR;AAGE,QAAA,KAAK,EAAErD,eAHT;AAIE,QAAA,OAAO,EAAE,MAAMsC,cAAc,EAJ/B;AAKE,QAAA,WAAW,EAAE,kBALf;AAME,QAAA,QAAQ;AANV;AAAA;AAAA;AAAA;AAAA,cADF,EASGa,kBAAkB,EATrB,eAWE;AACE,QAAA,EAAE,EAAE,aADN;AAEE,QAAA,SAAS,EAAE,MAFb;AAGE,QAAA,KAAK,EAAEjD,aAHT;AAIE,QAAA,OAAO,EAAE,MAAM;AACb0C,UAAAA,WAAW;AACZ,SANH;AAOE,QAAA,WAAW,EAAE,gBAPf;AAQE,QAAA,QAAQ;AARV;AAAA;AAAA;AAAA;AAAA,cAXF,eAsBE,QAAC,MAAD;AACE,QAAA,IAAI,EAAE;AAAEL,UAAAA,OAAO,EAAE,CAAX;AAAcyB,UAAAA,SAAS,EAAE,CAAC;AAA1B,SADR;AAEE,QAAA,EAAE,EAAE;AAAEzB,UAAAA,OAAO,EAAE,CAAX;AAAcyB,UAAAA,SAAS,EAAE;AAAzB,SAFN;AAAA,kBAIIxB,KAAD,iBACC;AAAK,UAAA,KAAK,EAAEA,KAAZ;AAAA,iCACE;AAAK,YAAA,KAAK,EAAE;AAAEC,cAAAA,MAAM,EAAE,GAAV;AAAeC,cAAAA,KAAK,EAAE,GAAtB;AAA2BC,cAAAA,eAAe,EAAE;AAA5C,aAAZ;AAAA,mCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,cAtBF,EAmCGoB,gBAAgB,EAnCnB;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAsCGnE,SAAS,CAACqE,MAAV,GAAmB,CAAnB,IAAwBnE,MAAM,CAACmE,MAAP,GAAgB,CAAxC,IAA6CvE,MAA7C,IAAuDU,aAAvD,iBACC;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,8BACE,QAAC,GAAD;AACE,QAAA,SAAS,EAAC,KADZ;AAEE,QAAA,QAAQ,EAAEJ,eAFZ;AAGE,QAAA,MAAM,EAAEE,aAHV;AAIE,QAAA,YAAY,EAAE,CAAC,GAAGI,iBAAJ,CAJhB;AAKE,QAAA,aAAa,EAAE,CAAC,GAAGF,aAAJ,CALjB;AAME,QAAA,MAAM,EAAEI,MANV;AAOE,QAAA,OAAO,EAAEE;AAPX;AAAA;AAAA;AAAA;AAAA,cADF,eAUE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE,QAAC,QAAD;AACE,UAAA,MAAM,EAAE,CAAC,GAAGZ,MAAJ,CADV;AAEE,UAAA,iBAAiB,EAAEQ,iBAFrB;AAGE,UAAA,aAAa,EAAEF,aAHjB;AAIE,UAAA,QAAQ,EAAEJ;AAJZ;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE,QAAC,QAAD;AACE,UAAA,MAAM,EAAE,CAAC,GAAGF,MAAJ,CADV;AAEE,UAAA,iBAAiB,EAAEQ,iBAFrB;AAGE,UAAA,QAAQ,EAAEN;AAHZ;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA,YAvCJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoED;;GAzQQP,G;;KAAAA,G;AA2QT,eAAeA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSpring, animated } from \"react-spring\";\nimport Valikot from \"./Valikot\";\nimport Map from \"./Map\";\nimport BarChart from \"./BarChart\";\nimport PieChart from \"./PieChart\";\n\nconst API_URL = \"https://tulikartta.fi/api-json2.php\";\nlet dropmenuMaakunnatIsVisible = false;\nlet dropmenuTyypitIsVisible = false;\n\nfunction App() {\n  const [paikat, setPaikat] = useState([]);\n  const [maakunnat, setMaakunnat] = useState([]);\n  const [tyypit, setTyypit] = useState([]);\n  const [valittuMaakunta, setValittuMaakunta] = useState(\"\");\n  const [valittuTyyppi, setValittuTyyppi] = useState(\"\");\n  const [rajatutPaikat, setRajatutPaikat] = useState([]);\n  const [paikatMaakunnassa, setPaikatMaakunnassa] = useState([]);\n  const [newLat, setNewLat] = useState();\n  const [newLong, setNewLong] = useState();\n\n  useEffect(() => {\n    fetch(API_URL, {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n    })\n      .then((response) => {\n        console.log(response);\n        return response.json();\n      })\n      .then((jsonData) => {\n        const paikatArr = [...jsonData];\n        const maakunnatArr = [];\n        const tyypitArr = [];\n\n        tyypitArr.push(\"Näytä kaikki\");\n\n        for (let i of paikatArr) {\n          maakunnatArr.push(i.maakunta);\n          tyypitArr.push(i.tyyppi);\n        }\n        const maakunnatRemoveDuplicates = [...new Set(maakunnatArr)];\n        const tyypitRemoveDublicates = [...new Set(tyypitArr)];\n\n        setPaikat([...jsonData]);\n        setMaakunnat([...maakunnatRemoveDuplicates]);\n        setTyypit([...tyypitRemoveDublicates]);\n        //paivitaPaikatMaakunnassa();\n      });\n  }, []);\n\n  useEffect(() => {\n    paivitaPaikatMaakunnassa();\n    //paivitaPaikat();\n    return () => {\n      console.log(\"CLEANUP\");\n    };\n  }, [valittuMaakunta]);\n\n  useEffect(() => {\n    paivitaPaikat();\n  }, [valittuTyyppi]);\n\n  const paivitaPaikatMaakunnassa = () => {\n    /* const paikatMaakunnassaArr = paikat.filter(\n      (paikka) => paikka.maakunta == valittuMaakunta\n    ); */\n    let paikatMaakunnassaArr = [];\n\n    if (valittuTyyppi == \"Näytä kaikki\" || valittuTyyppi == \"\") {\n      paikatMaakunnassaArr = paikat.filter(\n        (paikka) => paikka.maakunta == valittuMaakunta\n      );\n    } else {\n      paikatMaakunnassaArr = paikat.filter(\n        (paikka) =>\n          paikka.maakunta == valittuMaakunta && paikka.tyyppi == valittuTyyppi\n      );\n    }\n    setPaikatMaakunnassa([paikatMaakunnassaArr]);\n    setRajatutPaikat([paikatMaakunnassaArr]);\n\n    if (valittuMaakunta != \"\" && paikatMaakunnassaArr[0]) {\n      const splitKoordinaatit = paikatMaakunnassaArr[0].koordinaatti.split(\",\");\n      setNewLat(splitKoordinaatit[0]);\n      setNewLong(splitKoordinaatit[1]);\n    }\n  };\n\n  const naytaMaakunnat = () => {\n    /* let valikko = document.getElementById(\"maakunnatContainer\");\n\n    dropmenuMaakunnatIsVisible = !dropmenuMaakunnatIsVisible;\n    if (dropmenuMaakunnatIsVisible) {\n      valikko.style.display = \"block\";\n    } else {\n      valikko.style.display = \"none\";\n    } */\n\n    /* let testi = document.getElementById(\"testicontainer\");\n    testi.appendChild(\n      <Spring from={{ opacity: 0 }} to={{ opacity: 1 }}>\n        {(props) => <div style={props}>TERVETERVE</div>}\n      </Spring>\n    ); */\n\n    return (\n      <Spring from={{ opacity: 0 }} to={{ opacity: 1 }}>\n        {(props) => (\n          <div style={props}>\n            <div style={{ height: 200, width: 200, backgroundColor: \"blue\" }}>\n              MOIMOIMOI\n            </div>\n          </div>\n        )}\n      </Spring>\n    );\n  };\n\n  const naytaTyypit = () => {\n    let valikko = document.getElementById(\"tyypitContainer\");\n\n    dropmenuTyypitIsVisible = !dropmenuTyypitIsVisible;\n    if (dropmenuTyypitIsVisible) {\n      valikko.style.display = \"block\";\n    } else {\n      valikko.style.display = \"none\";\n    }\n  };\n\n  const paivitaPaikat = () => {\n    if (valittuMaakunta != \"\" && valittuTyyppi != \"Näytä kaikki\") {\n      let rajatutPaikat = [];\n      async function f() {\n        {\n          rajatutPaikat = paikat.filter(\n            (paikka) =>\n              paikka.maakunta == valittuMaakunta &&\n              paikka.tyyppi == valittuTyyppi\n          );\n        }\n      }\n      f().then(() => setRajatutPaikat([rajatutPaikat]));\n    } else if (valittuTyyppi == \"Näytä kaikki\") {\n      //setRajatutPaikat([...paikatMaakunnassa]);\n      paivitaPaikatMaakunnassa();\n    }\n  };\n\n  const luoMaakuntaValikko = () => {\n    let selectBox = document.getElementById(\"inputMaakunnat\");\n    const options = Object.values(maakunnat).map((maakunta, index) => (\n      <p\n        key={index}\n        className=\"valinnat\"\n        onClick={(e) => {\n          selectBox.value = e.target.innerHTML;\n          setValittuMaakunta(e.target.innerHTML);\n          selectBox.focus();\n          document.getElementById(\"maakunnatContainer\").style.display = \"none\";\n          dropmenuMaakunnatIsVisible = false;\n        }}\n      >\n        {maakunta}\n      </p>\n    ));\n\n    return (\n      <div\n        id={\"maakunnatContainer\"}\n        className=\"options\"\n        style={{ display: \"none\" }}\n      >\n        {options}\n      </div>\n    );\n  };\n\n  const luoTyypitValikko = () => {\n    let selectBox = document.getElementById(\"inputTyypit\");\n    const options = Object.values(tyypit).map((tyyppi, index) => (\n      <p\n        key={index}\n        className=\"valinnat\"\n        onClick={(e) => {\n          selectBox.value = e.target.innerHTML;\n          setValittuTyyppi(e.target.innerHTML);\n          selectBox.focus();\n          document.getElementById(\"tyypitContainer\").style.display = \"none\";\n          dropmenuTyypitIsVisible = false;\n        }}\n      >\n        {tyyppi}\n      </p>\n    ));\n\n    return (\n      <div\n        id={\"tyypitContainer\"}\n        className=\"options\"\n        style={{ display: \"none\" }}\n      >\n        {options}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"app-container\">\n      <div>\n        <input\n          id={\"inputMaakunnat\"}\n          type={\"text\"}\n          value={valittuMaakunta}\n          onClick={() => naytaMaakunnat()}\n          placeholder={\"Valitse maakunta\"}\n          readOnly\n        ></input>\n        {luoMaakuntaValikko()}\n\n        <input\n          id={\"inputTyypit\"}\n          inputMode={\"text\"}\n          value={valittuTyyppi}\n          onClick={() => {\n            naytaTyypit();\n          }}\n          placeholder={\"Valitse tyyppi\"}\n          readOnly\n        ></input>\n\n        <Spring\n          from={{ opacity: 0, marginTop: -200 }}\n          to={{ opacity: 1, marginTop: 0 }}\n        >\n          {(props) => (\n            <div style={props}>\n              <div style={{ height: 200, width: 200, backgroundColor: \"blue\" }}>\n                <h1>MOIMOIMO</h1>\n              </div>\n            </div>\n          )}\n        </Spring>\n\n        {luoTyypitValikko()}\n      </div>\n      {maakunnat.length > 0 && tyypit.length > 0 && paikat && rajatutPaikat && (\n        <div className=\"map-chart-wrapper\">\n          <Map\n            className=\"map\"\n            maakunta={valittuMaakunta}\n            tyyppi={valittuTyyppi}\n            kaikkiPaikat={[...paikatMaakunnassa]}\n            rajatutPaikat={[...rajatutPaikat]}\n            newLat={newLat}\n            newLong={newLong}\n          ></Map>\n          <div className=\"chart-wrapper\">\n            <BarChart\n              tyypit={[...tyypit]}\n              paikatMaakunnassa={paikatMaakunnassa}\n              rajatutPaikat={rajatutPaikat}\n              maakunta={valittuMaakunta}\n            ></BarChart>\n\n            <PieChart\n              paikat={[...tyypit]}\n              paikatMaakunnassa={paikatMaakunnassa}\n              maakunta={valittuMaakunta}\n            ></PieChart>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}